<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø´Ø·Ø±Ù†Ø¬ Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/1.0.0-beta.6/chess.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.js"></script>
  <script type="text/javascript" src="https://unpkg.com/stockfish@16/src/stockfish-nnue.wasm.js"></script>
  <style>
    body { background: #121212; color: white; text-align: center; font-family: Arial, sans-serif; padding: 20px; margin: 0; }
    h1 { font-size: 28px; margin: 10px; }
    p { font-size: 18px; }
    #board { width: 95vw; max-width: 500px; margin: 20px auto; }
    button { padding: 12px 24px; font-size: 18px; margin: 10px; background: #1E88E5; color: white; border: none; border-radius: 8px; cursor: pointer; }
    #status { font-size: 22px; margin: 20px; font-weight: bold; }
    #loading { font-size: 18px; color: #FFD700; margin: 20px; }
  </style>
</head>
<body>
  <h1>â™Ÿï¸ Ø´Ø·Ø±Ù†Ø¬ Ø¶Ø¯ AI Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹ Ø¬Ø¯Ø§Ù‹ â™Ÿï¸</h1>
  <p>Stockfish Elo ~3500+ â€“ Ø£Ù‚ÙˆÙ‰ Ù…Ø­Ø±Ùƒ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… (Ù‡ÙŠØ¶Ø±Ø¨Ùƒ Ø¶Ø±Ø¨ ØµØ¹Ø¨!)</p>
  <div id="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø© ÙˆØ§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù‚ÙˆÙŠ... Ø§Ù†ØªØ¸Ø± Ø«ÙˆØ§Ù†ÙŠ (Ø£ÙˆÙ„ Ù…Ø±Ø© Ø¨Ø³)</div>
  <div id="board" style="display: none;"></div>
  <button id="startWhite">Ø§Ù„Ø¹Ø¨ Ø£Ø¨ÙŠØ¶ (Ø£Ù†Øª ØªØ¨Ø¯Ø£)</button>
  <button id="startBlack">Ø§Ù„Ø¹Ø¨ Ø£Ø³ÙˆØ¯ (AI ÙŠØ¨Ø¯Ø£ Ø£ÙˆÙ„)</button>
  <button id="newGame">Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
  <p id="status">Ø§Ø¶ØºØ· Ø²Ø± Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©</p>

  <script>
    const game = new Chess();
    let board = null;
    let engine = null;
    let aiThinking = false;

    // ØªØ­Ù…ÙŠÙ„ Stockfish
    engine = STOCKFISH();
    engine.onmessage = (event) => {
      const line = event && typeof event === "object" ? event.data : event;
      if (line && line.startsWith('bestmove')) {
        const move = line.split(' ')[1];
        game.move(move);
        board.position(game.fen());
        updateStatus();
        aiThinking = false;
        hideLoading();
      }
    };

    function showLoading(msg = 'Ø§Ù„Ù€AI Ø¨ÙŠÙÙƒØ± Ø¨Ø¹Ù…Ù‚ Ø±Ù‡ÙŠØ¨...') {
      document.getElementById('loading').textContent = msg;
      document.getElementById('loading').style.display = 'block';
    }

    function hideLoading() {
      document.getElementById('loading').style.display = 'none';
    }

    const config = {
      draggable: true,
      position: 'start',
      onDrop: handleMove,
      pieceTheme: 'https://chessboardjs.com/img/chesspieces/wikipedia/{piece}.png',
    };

    function initBoard() {
      hideLoading();
      document.getElementById('board').style.display = 'block';
      if (board) board.destroy();
      board = Chessboard('board', config);
      board.position(game.fen());
      updateStatus();
    }

    function startGame(playerColor) {
      game.reset();
      initBoard();
      if (playerColor === 'black') aiMove();
    }

    function handleMove(source, target) {
      if (aiThinking) return 'snapback';
      const move = game.move({
        from: source,
        to: target,
        promotion: 'q'
      });
      if (move === null) return 'snapback';
      updateStatus();
      aiMove();
    }

    function aiMove() {
      if (game.game_over()) return;
      aiThinking = true;
      showLoading('Ø§Ù„Ù€AI Ø¨ÙŠØ­Ø³Ø¨ Ø­Ø±ÙƒØ© Ù‚Ø§ØªÙ„Ø©... (ØµØ¹Ø¨ Ø¬Ø¯Ù‹Ø§!)');
      engine.postMessage('position fen ' + game.fen());
      engine.postMessage('go depth 35'); // ØµØ¹ÙˆØ¨Ø© Ù…Ø¬Ù†ÙˆÙ†Ø©
    }

    function updateStatus() {
      let status = '';
      if (game.in_checkmate()) status = 'ğŸ‰ ÙƒØ´ Ù…Ø§Øª! Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©';
      else if (game.in_draw()) status = 'ğŸ¤ ØªØ¹Ø§Ø¯Ù„';
      else if (game.in_stalemate()) status = 'Ø³ØªØ§Ù„Ù…Ø§Øª';
      else status = game.turn() === 'w' ? 'Ø¯ÙˆØ±Ùƒ (Ø£Ø¨ÙŠØ¶)' : 'Ø¯ÙˆØ± Ø§Ù„Ù€AI (Ø£Ø³ÙˆØ¯)';
      document.getElementById('status').innerText = status;
    }

    // Ø£ÙˆØ§Ù…Ø± Stockfish
    engine.postMessage('uci');
    engine.postMessage('setoption name Skill Level value 20');
    engine.postMessage('setoption name Threads value 4');
    engine.postMessage('isready');

    // Ø£Ø²Ø±Ø§Ø±
    document.getElementById('startWhite').onclick = () => startGame('white');
    document.getElementById('startBlack').onclick = () => startGame('black');
    document.getElementById('newGame').onclick = () => startGame(game.turn() === 'w' ? 'white' : 'black');

    // Ø§Ø¨Ø¯Ø£ Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    setTimeout(() => {
      initBoard();
      startGame('white');
    }, 4000); // ÙˆÙ‚Øª ÙƒØ§ÙÙŠ Ù„Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„
  </script>
</body>
</html>
Commit message: "Full interactive chess with super strong AI
